(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{188:function(e,t,r){e.exports=r.p+"assets/img/forecast-data-model.c1141568.svg"},189:function(e,t,r){e.exports=r.p+"assets/img/element-data-model.15e304c2.svg"},190:function(e,t,r){e.exports=r.p+"assets/img/probe-data-model.837741f0.svg"},191:function(e,t,r){e.exports=r.p+"assets/img/probe-result-data-model.f209e861.svg"},192:function(e,t,r){e.exports=r.p+"assets/img/alert-data-model.9873ece7.svg"},206:function(e,t,r){"use strict";r.r(t);var a=[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"data-model-oriented-view-of-the-architecture"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#data-model-oriented-view-of-the-architecture","aria-hidden":"true"}},[this._v("#")]),this._v(" Data model-oriented view of the architecture")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"forecast-data-model"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#forecast-data-model","aria-hidden":"true"}},[this._v("#")]),this._v(" Forecast data model")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:r(188),alt:"Forecast data model"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("name")]),this._v(" : internal model name that will be used in path to reach the underlying service")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("label")]),this._v(" : the label for the model in the user interface")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("description")]),this._v(" : the description for the model in the user interface")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("attribution")]),this._v(" : the attribution of the data to be displayed when visualized")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("model")]),this._v(" : the model plugin to be used for this forecast")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("bounds")]),this._v(" : the geographical bounds covered by the model as an array of decimal values "),t("code",[this._v("[min longitude, min latitude, max longitude, max latitude]")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("origin")]),this._v(" : the geographical origin of the data grid as an array of decimal values "),t("code",[this._v("[longitude origin, latitude origin]")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("size")]),this._v(" : the size of the data grid as an array of integer values "),t("code",[this._v("[width, height]")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("resolution")]),this._v(" : the geographical resolution of the data grid as an array of decimal values "),t("code",[this._v("[longitude resolution, latitude resolution]")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("tileResolution")]),this._v(" : the geographical resolution of the data tiles as an array of decimal values "),t("code",[this._v("[longitude resolution, latitude resolution]")]),this._v(", if not given will not produce tiles")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("timeseries")]),this._v(" : if true will also generate tiles with aggregated data over all forecast times")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("runInterval")]),this._v(" : the period between two forecast runs (in seconds) - it also defines at which hours of the day the forecast data are produced (e.g. "),t("code",[this._v("00:00 - 06:00 - 12:00 - 18:00")]),this._v(" for a "),t("code",[this._v("3600")]),this._v(" seconds period)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("oldestRunInterval")]),this._v(" : how long do the server go back in time when harvesting forecast data (in seconds)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("interval")]),this._v(" : the period between two forecast time steps (in seconds)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("lowerLimit")]),this._v(" : the offset from run time for the first forecast time step to be gathered (in seconds)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("upperLimit")]),this._v(" : the offset from run time for the last forecast time step to be gathered (in seconds)")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",[r("strong",[e._v("updateInterval")]),e._v(" : the check period for data updates (default is every 15 minutes)\n"),r("ul",[r("li",[e._v("if "),r("code",[e._v("< 0")]),e._v(" no update will be performed, you need to trigger it manually by calling "),r("code",[e._v("updateForecastData()")]),e._v(" on the associated element service")]),e._v(" "),r("li",[e._v("if "),r("code",[e._v("= 0")]),e._v(" a single update will be performed when launching the server")]),e._v(" "),r("li",[e._v("if "),r("code",[e._v("> 0")]),e._v(" an update every N seconds will be performed as long as the server runs")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("name")]),this._v(" : internal element name that will be used in path to reach the underlying service")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("bucket")]),this._v(" : download bucket ID")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("db")]),this._v(" to store it directly in database (default if not given)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("code",[this._v("fs")]),this._v(" to store it on the file system")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("interval")]),this._v(", "),t("strong",[this._v("lowerLimit")]),this._v(", "),t("strong",[this._v("upperLimit")]),this._v(" to override on a per-element basis the default forecast options (see description before)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("By default all elements of a forecast model are downloaded sequentially unless you specify some buckets. If so, buckets are downloaded sequentially but all elements belonging to the same bucket will be downloaded in parallel.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"element-data-model"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#element-data-model","aria-hidden":"true"}},[this._v("#")]),this._v(" Element data model")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:r(189),alt:"Element data model"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[r("strong",[e._v("runTime")]),e._v(": the date/time of the model run that produced the forecast data")]),e._v(" "),r("li",[r("strong",[e._v("forecastTime")]),e._v(" : the date/time of the forecast data")]),e._v(" "),r("li",[r("strong",[e._v("minValue")]),e._v(" : the minimum value of the element in the forecast data")]),e._v(" "),r("li",[r("strong",[e._v("maxValue")]),e._v(" : the maximum value of the element in the forecast data")]),e._v(" "),r("li",[r("strong",[e._v("data")]),e._v(" : the forecast data for the element")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("If the data store of the element in the forecast model configuration is the database then the "),t("strong",[this._v("data")]),this._v(" property containing forecast data is stored in the model, otherwise if the data store is the file system it has an additional "),t("strong",[this._v("convertedFilePath")]),this._v(" (respectively "),t("strong",[this._v("filePath")]),this._v(") property only used internally to retrieve the JSON converted (respectively source) data on-the-fly.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("When tiling is configured each forecast element generate an additional tile set with the following additional properties:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[r("strong",[e._v("x/y")]),e._v(" : coordinate of the tile in the tile set grid")]),e._v(" "),r("li",[r("strong",[e._v("bounds")]),e._v(" : the geographical bounds covered by the tile as an array of decimal values "),r("code",[e._v("[min longitude, min latitude, max longitude, max latitude]")])]),e._v(" "),r("li",[r("strong",[e._v("origin")]),e._v(" : the geographical origin of the tile data grid as an array of decimal values "),r("code",[e._v("[longitude origin, latitude origin]")])]),e._v(" "),r("li",[r("strong",[e._v("size")]),e._v(" : the size of the tile data grid as an array of integer values "),r("code",[e._v("[width, height]")])]),e._v(" "),r("li",[r("strong",[e._v("resolution")]),e._v(" : the geographical resolution of the tile data grid as an array of decimal values "),r("code",[e._v("[longitude resolution, latitude resolution]")])]),e._v(" "),r("li",[r("strong",[e._v("geometry")]),e._v(": GeoJSON geometry of the tile")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"probe-data-model"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#probe-data-model","aria-hidden":"true"}},[this._v("#")]),this._v(" Probe data model")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:r(190),alt:"Probe data model"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("forecast")]),this._v(": the forecast model instance name to be probed according to the "),t("a",{attrs:{href:"../guides/BASICS.MD#configuring"}},[this._v("configuration")]),this._v(",")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("featureId")]),this._v(": only useful for streamed probes, indicates which field(s) can be used as unique identifier of your features (support dot notation)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"probe-result-data-model"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#probe-result-data-model","aria-hidden":"true"}},[this._v("#")]),this._v(" Probe result data model")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:r(191),alt:"Probe data model"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("strong",[this._v("runTime")]),this._v(": the date/time of the model run that produced the forecast data that has been used to produce the probe result")]),this._v(" "),t("li",[t("strong",[this._v("forecastTime")]),this._v(" : the date/time of the forecast data that has been used to produce the probe result")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"alert-data-model"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alert-data-model","aria-hidden":"true"}},[this._v("#")]),this._v(" Alert data model")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:r(192),alt:"Alert data model"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("probeId")]),this._v(": the ID of the probe to be checked by the alert")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("elements")]),this._v(": array of names corresponding to the probed forecast element values to be checked by the alert (each element has to be declared in the the "),t("a",{attrs:{href:"../guides/BASICS.MD#configuring"}},[this._v("configuration")]),this._v(")")])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("strong",[this._v("featureId")]),this._v(": indicates which field(s) can be used as a unique identifier of your probe features (support dot notation)")])}],o=r(0),i=Object(o.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._m(0),e._v(" "),r("p",[e._v("According to the "),r("a",{attrs:{href:"https://docs.feathersjs.com/guides/about/philosophy.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Feathers philosophy"),r("OutboundLink")],1),e._v(" each data model is manipulated using a "),r("a",{attrs:{href:"https://docs.feathersjs.com/api/services.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("service interface"),r("OutboundLink")],1),e._v(" to perform "),r("a",{attrs:{href:"https://en.wikipedia.org/wiki/Create,_read,_update_and_delete",target:"_blank",rel:"noopener noreferrer"}},[e._v("CRUD operations"),r("OutboundLink")],1),e._v(" of the "),r("a",{attrs:{href:"https://docs.feathersjs.com/api/databases/common.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("persistence layer"),r("OutboundLink")],1),e._v(". So this data model-oriented view is a service-oriented view in the same manner.")]),e._v(" "),r("p",[e._v("Because data models internally rely on "),r("a",{attrs:{href:"http://www.json.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("JSON"),r("OutboundLink")],1),e._v(" they are by nature hierarchical. In the following diagrams each nested JSON object is represented as a smaller "),r("em",[e._v("bubble")]),e._v(" in a bigger "),r("em",[e._v("bubble")]),e._v(" (the nesting/parent object), the data model instance being the root JSON object or the "),r("em",[e._v("biggest")]),e._v(" bubble. The name of the bubble is the name of the nesting object property owing the nested object.")]),e._v(" "),e._m(1),e._v(" "),r("p",[e._v("The common properties of a forecast model instance are described by the following data model:")]),e._v(" "),e._m(2),e._v(" "),r("p",[e._v("This data model is instantiated from the "),r("router-link",{attrs:{to:"./../guides/basics.html#configuring"}},[e._v("configuration")]),e._v(" and manipulated through the "),r("router-link",{attrs:{to:"./../api/forecast.html"}},[e._v("Forecast model API")]),e._v(".")],1),e._v(" "),r("p",[e._v("The details of each property are the following:")]),e._v(" "),r("ul",[e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),e._m(10),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),e._m(13),e._v(" "),e._m(14),e._v(" "),e._m(15),e._v(" "),e._m(16),e._v(" "),e._m(17),e._v(" "),e._m(18),e._v(" "),e._m(19),e._v(" "),r("li",[r("strong",[e._v("elements")]),e._v(" : an array of forecast elements that will be managed for this model, the common properties are the following\n"),r("ul",[e._m(20),e._v(" "),e._m(21),e._v(" "),r("li",[r("strong",[e._v("dataStore")]),e._v(" : data store to be used for the forecast data, could be\n"),r("ul",[e._m(22),e._v(" "),e._m(23),e._v(" "),r("li",[r("code",[e._v("gridfs")]),e._v(" to store it using "),r("a",{attrs:{href:"https://docs.mongodb.com/manual/core/gridfs/",target:"_blank",rel:"noopener noreferrer"}},[e._v("GrigFS"),r("OutboundLink")],1)])])]),e._v(" "),e._m(24)])])]),e._v(" "),e._m(25),e._v(" "),e._m(26),e._v(" "),r("p",[e._v("The common properties of a forecast element are described by the following data model:")]),e._v(" "),e._m(27),e._v(" "),r("p",[e._v("This data model is instantiated when forecast data are gathered by "),r("router-link",{attrs:{to:"./../api/plugin.html"}},[e._v("Forecast model plugins")]),e._v(" and manipulated through the "),r("router-link",{attrs:{to:"./../api/element.html"}},[e._v("Forecast element API")]),e._v(".")],1),e._v(" "),r("p",[e._v("The details of each property are the following:")]),e._v(" "),e._m(28),e._v(" "),r("p",[e._v("A forecast element will cover the period until the start of the next available forecast, what is called the Time To Live (or TTL in short), this is typically one or three hour(s) for much of forecast data. Once its validity has expired it is automatically removed from the database.")]),e._v(" "),e._m(29),e._v(" "),e._m(30),e._v(" "),e._m(31),e._v(" "),e._m(32),e._v(" "),r("p",[e._v("The properties of a probe object are described by the following data model:")]),e._v(" "),e._m(33),e._v(" "),r("p",[e._v("This data model is instantiated when forecast data are asked to be probed by the "),r("router-link",{attrs:{to:"./../api/probe.html"}},[e._v("Probe plugin")]),e._v(" and manipulated through the "),r("router-link",{attrs:{to:"./../api/probe.html#probes-api"}},[e._v("Probes API")]),e._v(".")],1),e._v(" "),r("p",[e._v("The common model for on-demand or stream mode is a "),r("a",{attrs:{href:"https://tools.ietf.org/html/rfc7946#section-3.3",target:"_blank",rel:"noopener noreferrer"}},[e._v("GeoJSON feature collection"),r("OutboundLink")],1),e._v(", where each "),r("a",{attrs:{href:"https://tools.ietf.org/html/rfc7946#section-3.2",target:"_blank",rel:"noopener noreferrer"}},[e._v("GeoJSON feature"),r("OutboundLink")],1),e._v(" describes a location of interest.")]),e._v(" "),r("div",{staticClass:"warning custom-block"},[r("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),r("p",[e._v("For now only features with "),r("a",{attrs:{href:"https://tools.ietf.org/html/rfc7946#section-3.1.2",target:"_blank",rel:"noopener noreferrer"}},[e._v("GeoJSON point geometry"),r("OutboundLink")],1),e._v(" are supported.")])]),e._v(" "),r("p",[e._v("The following additional properties of the GeoJSON collection allows to configure the probe:")]),e._v(" "),r("ul",[e._m(34),e._v(" "),r("li",[r("strong",[e._v("elements")]),e._v(": array of names corresponding to the forecast element values to be probed in the forecast data (each element has to be declared in the the "),r("router-link",{attrs:{to:"./../guides/basics.html#configuring"}},[e._v("configuration")]),e._v(")")],1),e._v(" "),e._m(35)]),e._v(" "),r("div",{staticClass:"warning custom-block"},[r("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),r("p",[e._v("Features of the collection are usually numerous so they are not returned by default, you have to explicitly ask for using "),r("a",{attrs:{href:"https://docs.feathersjs.com/api/databases/querying.html#select",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("$select")]),r("OutboundLink")],1),e._v(".")])]),e._v(" "),e._m(36),e._v(" "),r("p",[e._v("The properties of a probe result object are described by the following data model:")]),e._v(" "),e._m(37),e._v(" "),r("p",[e._v("This data model is instantiated when forecast data are probed by the "),r("router-link",{attrs:{to:"./../api/probe.html"}},[e._v("Probe plugin")]),e._v(" and manipulated through the "),r("router-link",{attrs:{to:"./../api/probe.html#probe-results-api"}},[e._v("Probe results API")]),e._v(".")],1),e._v(" "),r("p",[e._v("The common model for probe results is a "),r("a",{attrs:{href:"https://tools.ietf.org/html/rfc7946#section-3.2",target:"_blank",rel:"noopener noreferrer"}},[e._v("GeoJSON feature"),r("OutboundLink")],1),e._v(" with "),r("a",{attrs:{href:"https://tools.ietf.org/html/rfc7946#section-3.1.2",target:"_blank",rel:"noopener noreferrer"}},[e._v("GeoJSON point geometry"),r("OutboundLink")],1),e._v(". Each result contains an additional property per probed element (in the "),r("code",[e._v("properties")]),e._v(" field), according to its "),r("router-link",{attrs:{to:"./../guides/basics.html#configuring"}},[e._v("configured name")]),e._v(", storing the target element value. It also contains the following:")],1),e._v(" "),e._m(38),e._v(" "),r("div",{staticClass:"tip custom-block"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("When performing probe results aggregation probed value, runTime and forecastTime will be arrays ordered according to ascending time and stored in an additional property per probed element according to its "),r("router-link",{attrs:{to:"./../guides/basics.html#configuring"}},[e._v("configured name")])],1)]),e._v(" "),e._m(39),e._v(" "),r("p",[e._v("The properties of an alert object are described by the following data model:")]),e._v(" "),e._m(40),e._v(" "),r("p",[e._v("This data model is instantiated and manipulated through the "),r("router-link",{attrs:{to:"./../api/alert.html"}},[e._v("Alert API")]),e._v(".")],1),e._v(" "),r("p",[e._v("The details of each property are the following:")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("cron")]),e._v(": a "),r("a",{attrs:{href:"https://github.com/kelektiv/node-cron",target:"_blank",rel:"noopener noreferrer"}},[e._v("CRON pattern"),r("OutboundLink")],1),e._v(" to schedule the alert check at regular intervals, e.g. "),r("code",[e._v("* 0 * * * *")]),e._v(" will run it every minute")]),e._v(" "),e._m(41),e._v(" "),e._m(42),e._v(" "),e._m(43),e._v(" "),r("li",[r("strong",[e._v("period")]),e._v(": time interval used to do the matching between the forecast data and the trigger conditions\n"),r("ul",[r("li",[r("strong",[e._v("start")]),e._v(": offset which needs to be added to the current timestamp at the moment of validation to compute the beginning of the time interval used to check the conditions, specified as "),r("a",{attrs:{href:"https://momentjs.com/docs/#/manipulating/add/",target:"_blank",rel:"noopener noreferrer"}},[e._v("moment.js duration object"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("strong",[e._v("end")]),e._v(": offset which needs to be added to the current timestamp at the moment of validation to compute the end of the time interval used to check the conditions, specified as "),r("a",{attrs:{href:"https://momentjs.com/docs/#/manipulating/add/",target:"_blank",rel:"noopener noreferrer"}},[e._v("moment.js duration object"),r("OutboundLink")],1)])])]),e._v(" "),r("li",[r("strong",[e._v("conditions")]),e._v(": query specification which contains nested objects:\n"),r("ul",[r("li",[r("strong",[e._v("[element]")]),e._v(": for each checked element a filter according to the computed element values specified using the "),r("a",{attrs:{href:"https://docs.feathersjs.com/api/databases/querying.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Feathers common database query API"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("strong",[e._v("geometry")]),e._v(" specification of a "),r("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/operator/query/geoWithin/",target:"_blank",rel:"noopener noreferrer"}},[e._v("geospatial query"),r("OutboundLink")],1)])])])])])},a,!1,null,null,null);i.options.__file="data-model-view.md";t.default=i.exports}}]);